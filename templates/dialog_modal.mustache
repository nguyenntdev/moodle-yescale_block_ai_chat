{{!
This file is part of Moodle - http://moodle.org/

Moodle is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Moodle is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_ai_chat/dialog_modal

    Fluent UI inspired dialog modal for AI Chat

    Classes required for JS:
    * block_ai_chat_modal
    * block_ai_chat-input-id
    * block_ai_chat-submit-id

    Context variables required for this template:
    * title - Dialog title
    * showPersona - Whether to show persona options
    * showOptions - Whether to show options

    Example context (json):
    {
        "title": "AI Assistant",
        "showPersona": true,
        "showOptions": true
    }
}}

{{< core/modal }}
    {{$title}}
        <div class="block_ai_chat_title" role="heading" aria-level="1">{{title}}</div>
        {{> block_ai_chat/headeroptions }}
    {{/title}}
    {{$body}}
        <div class="block_ai_chat_modal_body" role="main">
            <!-- Info section for notifications and warnings -->
            <div class="infobox" role="region" aria-label="{{#str}}notifications, core{{/str}}">
                <div data-content="local_ai_manager_infobox"></div>
                <div class="local_ai_manager-ai-warning"></div>
            </div>
            
            <!-- Main chat interface -->
            <div class="block_ai_chat-dialog" role="log" aria-label="{{#str}}chathistory, block_ai_chat{{/str}}" aria-live="polite">
                <!-- Chat messages container -->
                <div class="block_ai_chat-output-wrapper" role="region" aria-label="{{#str}}conversation, block_ai_chat{{/str}}">
                    <div class="block_ai_chat-output" id="chat-messages">
                        <!-- Messages will be dynamically inserted here -->
                    </div>
                </div>
                
                <!-- Input area -->
                <div class="block_ai_chat-input-wrapper" role="region" aria-label="{{#str}}messageinput, block_ai_chat{{/str}}">
                    <form class="block_ai_chat-input" role="form" aria-label="{{#str}}sendmessage, block_ai_chat{{/str}}">
                        <!-- Message input -->
                        <textarea class="form-control" 
                                  id="block_ai_chat-input-id"
                                  name="message"
                                  rows="1" 
                                  placeholder="{{#str}}input, block_ai_chat{{/str}}"
                                  aria-label="{{#str}}input, block_ai_chat{{/str}}"
                                  aria-describedby="chat-input-help"
                                  maxlength="4000"></textarea>
                        
                        <!-- Send button -->
                        <button type="submit" 
                                id="block_ai_chat-submit-id" 
                                class="btn-send"
                                aria-label="{{#str}}sendmessage, block_ai_chat{{/str}}"
                                title="{{#str}}sendmessage, block_ai_chat{{/str}}">
                            <i class="icon fa fa-paper-plane" aria-hidden="true"></i>
                        </button>
                    </form>
                    
                    <!-- Usage quota information -->
                    <div id="block_ai_chat_userquota" 
                         role="status" 
                         aria-label="{{#str}}usagequota, block_ai_chat{{/str}}">
                    </div>
                    
                    <!-- Screen reader helper text -->
                    <div id="chat-input-help" class="sr-only">
                        {{#str}}inputhelp, block_ai_chat{{/str}}
                    </div>
                </div>
            </div>
        </div>
    {{/body}}
    {{$footer}}
    {{/footer}}
{{/ core/modal }}
